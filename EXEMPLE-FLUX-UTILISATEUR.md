# ğŸ¬ EXEMPLE DE FLUX UTILISATEUR COMPLET

## ğŸ“– ScÃ©nario : Amadou Diop s'inscrit sur GED CERER

---

## Ã‰TAPE 1 : INSCRIPTION

### Frontend - Formulaire d'inscription

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ Inscription GED CERER               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  Nom complet                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Amadou Diop                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  Nom d'utilisateur                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ amadou_diop                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  Email universitaire                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ amadou.diop@ucad.sn               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  Mot de passe                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  [ S'inscrire ]                         â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Backend - Validation

```javascript
POST /api/register
{
  "username": "amadou_diop",
  "password": "temp1234",
  "nom": "Amadou Diop",
  "email": "amadou.diop@ucad.sn"
}

// âœ… Ã‰tapes de validation :
1. âœ… Format email valide
2. âœ… Domaine autorisÃ© (ucad.sn)
3. âœ… Email unique
4. âœ… Username unique
5. âœ… Mot de passe hashÃ©
6. âœ… Utilisateur crÃ©Ã© avec firstLogin = true
7. âœ… Email de bienvenue envoyÃ©
```

### RÃ©ponse

```json
{
  "success": true
}
```

### Message affichÃ© Ã  l'utilisateur

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… Compte crÃ©Ã© avec succÃ¨s !           â”‚
â”‚                                         â”‚
â”‚  Un email de bienvenue contenant vos   â”‚
â”‚  identifiants a Ã©tÃ© envoyÃ© Ã  :         â”‚
â”‚  amadou.diop@ucad.sn                    â”‚
â”‚                                         â”‚
â”‚  [ Se connecter ]                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Ã‰TAPE 2 : EMAIL REÃ‡U

### BoÃ®te email d'Amadou

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ De : GED CERER <noreply@cerer.sn>                     â”‚
â”‚ Ã€ : amadou.diop@ucad.sn                               â”‚
â”‚ Sujet : ğŸ“ Bienvenue sur GED CERER - Vos identifiants â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                  â”‚ â”‚
â”‚  â”‚        ğŸ“ Bienvenue sur GED CERER               â”‚ â”‚
â”‚  â”‚   Plateforme de Gestion Ã‰lectronique            â”‚ â”‚
â”‚  â”‚           de Documents                           â”‚ â”‚
â”‚  â”‚                                                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                        â”‚
â”‚  Bonjour Amadou Diop,                                 â”‚
â”‚                                                        â”‚
â”‚  Votre compte a Ã©tÃ© crÃ©Ã© avec succÃ¨s sur la           â”‚
â”‚  plateforme GED CERER, rÃ©servÃ©e aux universitÃ©s       â”‚
â”‚  sÃ©nÃ©galaises.                                        â”‚
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ âœ“ UniversitÃ© reconnue :                         â”‚ â”‚
â”‚  â”‚   UniversitÃ© Cheikh Anta Diop de Dakar          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                        â”‚
â”‚  ğŸ”‘ VOS IDENTIFIANTS DE CONNEXION                     â”‚
â”‚                                                        â”‚
â”‚  Email :              amadou.diop@ucad.sn             â”‚
â”‚  Nom d'utilisateur :  amadou_diop                     â”‚
â”‚  Mot de passe :       temp1234                        â”‚
â”‚                                                        â”‚
â”‚  âš ï¸ Important : Pour votre sÃ©curitÃ©, veuillez changer â”‚
â”‚     ce mot de passe dÃ¨s votre premiÃ¨re connexion.     â”‚
â”‚                                                        â”‚
â”‚  [ Se connecter maintenant ]                          â”‚
â”‚                                                        â”‚
â”‚  ğŸ“š Premiers pas :                                     â”‚
â”‚  â€¢ Connectez-vous avec vos identifiants               â”‚
â”‚  â€¢ Changez votre mot de passe dans les paramÃ¨tres     â”‚
â”‚  â€¢ ComplÃ©tez votre profil                             â”‚
â”‚  â€¢ Commencez Ã  archiver vos documents                 â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Ã‰TAPE 3 : PREMIÃˆRE CONNEXION

### Frontend - Formulaire de connexion

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” Connexion GED CERER                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  Nom d'utilisateur                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ amadou_diop                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  Mot de passe                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  [ Se connecter ]                       â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Backend - Authentification

```javascript
POST /api/login
{
  "username": "amadou_diop",
  "password": "temp1234"
}

// âœ… Ã‰tapes :
1. âœ… Utilisateur trouvÃ©
2. âœ… Mot de passe correct
3. âœ… firstLogin === true dÃ©tectÃ©
4. âœ… firstLogin marquÃ© Ã  false en DB
5. âœ… Date premiÃ¨re connexion enregistrÃ©e
```

### RÃ©ponse (âš ï¸ firstLogin = true)

```json
{
  "success": true,
  "username": "amadou_diop",
  "firstLogin": true,  â† âš ï¸ DÃ‰CLENCHE LE MODAL
  "user": {
    "username": "amadou_diop",
    "nom": "Amadou Diop",
    "email": "amadou.diop@ucad.sn",
    "role": "tertiaire",
    "niveau": 3,
    "departement": "Direction"
  }
}
```

---

## Ã‰TAPE 4 : MODAL DE BIENVENUE (PREMIÃˆRE CONNEXION)

### Frontend - Modal affichÃ© automatiquement

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                       â”‚
â”‚        ğŸ‰ Bienvenue Amadou Diop !                     â”‚
â”‚     PremiÃ¨re connexion Ã  la plateforme GED CERER      â”‚
â”‚                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ âœ“ UniversitÃ© reconnue :                        â”‚ â”‚
â”‚  â”‚   UniversitÃ© Cheikh Anta Diop de Dakar         â”‚ â”‚
â”‚  â”‚                                                 â”‚ â”‚
â”‚  â”‚ ğŸ“§ Email : amadou.diop@ucad.sn                 â”‚ â”‚
â”‚  â”‚ ğŸ‘¤ Username : amadou_diop                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ âš ï¸ Important : Pour votre sÃ©curitÃ©, nous vous  â”‚ â”‚
â”‚  â”‚    recommandons fortement de changer votre     â”‚ â”‚
â”‚  â”‚    mot de passe maintenant.                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                       â”‚
â”‚  Mot de passe actuel                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ temp1234                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                       â”‚
â”‚  Nouveau mot de passe (min 4 caractÃ¨res)             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢                                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                       â”‚
â”‚  Confirmer le nouveau mot de passe                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢                                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                       â”‚
â”‚  [ ğŸ”’ Changer mon mot de passe ]  [ Plus tard ]      â”‚
â”‚                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Backend - Changement de mot de passe

```javascript
POST /api/users/amadou_diop/change-password
{
  "currentPassword": "temp1234",
  "newPassword": "AmadouSecure2024!"
}

// âœ… Ã‰tapes :
1. âœ… Utilisateur trouvÃ©
2. âœ… Mot de passe actuel vÃ©rifiÃ©
3. âœ… Nouveau mot de passe valide (â‰¥ 4 caractÃ¨res)
4. âœ… Nouveau mot de passe hashÃ©
5. âœ… Mot de passe mis Ã  jour
6. âœ… Date de changement enregistrÃ©e
```

### RÃ©ponse

```json
{
  "success": true,
  "message": "Mot de passe changÃ© avec succÃ¨s"
}
```

### Logs serveur

```
ğŸ‰ PremiÃ¨re connexion de amadou_diop
ğŸ”‘ Mot de passe changÃ© pour: amadou_diop
```

---

## Ã‰TAPE 5 : REDIRECTION VERS LE TABLEAU DE BORD

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GED CERER - Tableau de bord                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Bienvenue, Amadou Diop                               â”‚
â”‚  ğŸ“§ amadou.diop@ucad.sn                               â”‚
â”‚  ğŸ“ UniversitÃ© Cheikh Anta Diop de Dakar              â”‚
â”‚                                                       â”‚
â”‚  ğŸ“Š Mes documents (0)                                 â”‚
â”‚  ğŸ“ Mes catÃ©gories                                    â”‚
â”‚  âš™ï¸  ParamÃ¨tres                                       â”‚
â”‚                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Ã‰TAPE 6 : DEUXIÃˆME CONNEXION (SANS MODAL)

### Frontend - Connexion normale

```
POST /api/login
{
  "username": "amadou_diop",
  "password": "AmadouSecure2024!"  â† Nouveau mot de passe
}
```

### RÃ©ponse (firstLogin = false)

```json
{
  "success": true,
  "username": "amadou_diop",
  "firstLogin": false,  â† PAS DE MODAL
  "user": {
    "username": "amadou_diop",
    "nom": "Amadou Diop",
    "email": "amadou.diop@ucad.sn",
    "role": "tertiaire",
    "niveau": 3,
    "departement": "Direction"
  }
}
```

### Comportement

- âœ… Pas de modal de bienvenue
- âœ… Redirection directe vers le tableau de bord
- âœ… Connexion normale

---

## ğŸ­ SCÃ‰NARIOS D'ERREUR

### ScÃ©nario 1 : Email Gmail (non autorisÃ©)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Email universitaire                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ amadou.diop@gmail.com             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  âŒ Cette plateforme est rÃ©servÃ©e aux   â”‚
â”‚     universitÃ©s sÃ©nÃ©galaises            â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ScÃ©nario 2 : Faute de frappe (ucad.com)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Email universitaire                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ amadou.diop@ucad.com              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  âŒ Cette plateforme est rÃ©servÃ©e aux   â”‚
â”‚     universitÃ©s sÃ©nÃ©galaises            â”‚
â”‚                                         â”‚
â”‚  ğŸ’¡ Vouliez-vous dire : ucad.sn ?       â”‚
â”‚     [ Utiliser ucad.sn ]                â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ScÃ©nario 3 : Mot de passe actuel incorrect

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Changer mon mot de passe               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  Mot de passe actuel                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ mauvais_mdp                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  âŒ Mot de passe actuel incorrect       â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š RÃ‰SUMÃ‰ DU FLUX

```
Inscription
    â”‚
    â”œâ”€> âœ… Validation email (domaine universitaire)
    â”œâ”€> âœ… CrÃ©ation utilisateur (firstLogin = true)
    â””â”€> âœ… Envoi email avec identifiants
         â”‚
         â”‚
    PremiÃ¨re connexion
         â”‚
         â”œâ”€> âœ… Authentification rÃ©ussie
         â”œâ”€> âœ… DÃ©tection firstLogin = true
         â”œâ”€> âœ… Affichage modal de bienvenue
         â”œâ”€> âœ… Changement de mot de passe (optionnel)
         â””â”€> âœ… Marquage firstLogin = false
              â”‚
              â”‚
    Connexions suivantes
              â”‚
              â”œâ”€> âœ… Authentification rÃ©ussie
              â”œâ”€> âœ… firstLogin = false
              â””â”€> âœ… AccÃ¨s direct au tableau de bord
```

---

## ğŸ” DONNÃ‰ES STOCKÃ‰ES EN BASE

### Utilisateur crÃ©Ã© (MongoDB)

```javascript
{
  "_id": ObjectId("..."),
  "username": "amadou_diop",
  "password": "$2b$10$...",  // Hash bcrypt
  "nom": "Amadou Diop",
  "email": "amadou.diop@ucad.sn",
  "idRole": ObjectId("..."),
  "idDepartement": ObjectId("..."),
  "dateCreation": ISODate("2025-11-15T01:00:00.000Z"),
  "firstLogin": true,  â† Initialement true
}
```

### AprÃ¨s premiÃ¨re connexion

```javascript
{
  "_id": ObjectId("..."),
  "username": "amadou_diop",
  "password": "$2b$10$...",
  "nom": "Amadou Diop",
  "email": "amadou.diop@ucad.sn",
  "idRole": ObjectId("..."),
  "idDepartement": ObjectId("..."),
  "dateCreation": ISODate("2025-11-15T01:00:00.000Z"),
  "firstLogin": false,  â† MarquÃ© false
  "datePremiereConnexion": ISODate("2025-11-15T02:30:00.000Z"),  â† AjoutÃ©
}
```

### AprÃ¨s changement de mot de passe

```javascript
{
  "_id": ObjectId("..."),
  "username": "amadou_diop",
  "password": "$2b$10$...",  â† Nouveau hash
  "nom": "Amadou Diop",
  "email": "amadou.diop@ucad.sn",
  "idRole": ObjectId("..."),
  "idDepartement": ObjectId("..."),
  "dateCreation": ISODate("2025-11-15T01:00:00.000Z"),
  "firstLogin": false,
  "datePremiereConnexion": ISODate("2025-11-15T02:30:00.000Z"),
  "updatedAt": ISODate("2025-11-15T02:35:00.000Z"),  â† AjoutÃ©
  "passwordChangedAt": ISODate("2025-11-15T02:35:00.000Z")  â† AjoutÃ©
}
```

---

**Date :** 15 novembre 2025
**TestÃ© avec :** amadou_diop@ucad.sn
**Statut :** âœ… Flux complet fonctionnel
